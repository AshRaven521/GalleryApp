<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="GalleryMobile.MainPage"
             xmlns:viewModel="clr-namespace:GalleryMobile.MVVM.ViewModel">

    <ContentPage.BindingContext>
        <viewModel:MainPageViewModel></viewModel:MainPageViewModel>
    </ContentPage.BindingContext>

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="0.1*"/>
            <RowDefinition Height="0.9*"/>
        </Grid.RowDefinitions>

        <Button Text="Get photos"
                Command="{Binding GetPhotosCommand}"
                Margin="10"
                Grid.Row="0"/>

        <CollectionView
                x:Name="photosCollection"
                ItemSizingStrategy="MeasureFirstItem"
                ItemsLayout="VerticalGrid, 2"
                ItemsSource="{Binding UnsplashPhotos}"
                Grid.Row="1">
            <CollectionView.ItemTemplate>
                <DataTemplate>


                    <Image Aspect="AspectFit"
                           Margin="5, 5, 5, 5"
                           HeightRequest="200"
                           WidthRequest="200">

                        <Image.Source>
                            <UriImageSource Uri="{Binding Url}"
                                            CachingEnabled="True"
                                            CacheValidity="10:00:00"/>
                        </Image.Source>
                    </Image>


                </DataTemplate>
            </CollectionView.ItemTemplate>
        </CollectionView>

    </Grid>


</ContentPage>
